(this["webpackJsonpwould-you-rather"]=this["webpackJsonpwould-you-rather"]||[]).push([[0],[,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));const s={SET_USERS:"set users",SET_USERS_REQUSET:"set users request",SET_LOGGED_USER:"set user",LOGOUT_USER:"logout",SET_SAVING_ANSWER:"set saving answer",ADD_USER_ANSWER:"add user answer"},r={SET_QUESTIONS:"set questions",SET_QUESTIONS_REQUSET:"set questions request",SET_ADDING_QUESTION:"set adding question"},a=[{route:"/",title:"Home"},{route:"/add",title:"New Question"},{route:"/leaderboard",title:"Leader Board"}]},,,,,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var s={};n.r(s),n.d(s,"setUsers",(function(){return w})),n.d(s,"getUsers",(function(){return S})),n.d(s,"setLoggedUser",(function(){return E})),n.d(s,"logout",(function(){return y})),n.d(s,"saveUserAnswer",(function(){return U})),n.d(s,"saveUserQuestion",(function(){return T}));var r={};n.r(r),n.d(r,"setQuestions",(function(){return k})),n.d(r,"getQuestions",(function(){return R})),n.d(r,"saveQuestionAnswer",(function(){return A})),n.d(r,"addQuestion",(function(){return Q}));var a={};n.r(a),n.d(a,"startApp",(function(){return z}));var o=n(10),c=n(24),i=n(2),u=n(3);const d={users:[],users_request:!1,logged_user:null,logged:!1,saving_answer:!1},l={questions:[],questions_request:!1,adding_question:!1},b=Object(o.c)({users:function(e=d,{type:t,payload:n=null}){switch(t){case u.c.SET_USERS:return Object(i.a)(Object(i.a)({},e),{},{users:n});case u.c.SET_USERS_REQUSET:return Object(i.a)(Object(i.a)({},e),{},{users_request:n});case u.c.SET_LOGGED_USER:return Object(i.a)(Object(i.a)({},e),{},{logged_user:n,logged:!0});case u.c.LOGOUT_USER:return Object(i.a)(Object(i.a)({},e),{},{logged_user:null,logged:!1});case u.c.SAVING_ANSWER:return Object(i.a)(Object(i.a)({},e),{},{saving_answer:n});default:return e}},questions:function(e=l,{type:t,payload:n=null}){switch(t){case u.b.SET_QUESTIONS:return Object(i.a)(Object(i.a)({},e),{},{questions:n});case u.b.SET_QUESTIONS_REQUSET:return Object(i.a)(Object(i.a)({},e),{},{questions_request:n});case u.b.SET_ADDING_QUESTION:return Object(i.a)(Object(i.a)({},e),{},{adding_question:n});default:return e}}}),j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,p=Object(o.e)(b,j(Object(o.a)(c.a)));var _=n(5),m=n.n(_),h=n(12);let O=[{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://w7.pngwing.com/pngs/510/349/png-transparent-computer-icons-teacher-avatar-miscellaneous-child-heroes-thumbnail.png",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://sun6-23.userapi.com/s/v1/ig1/jgJChoUwkgOV159CjwE0LVYoccA0z7hVA0MraX5IGkX8d8SUEw6n3M1ZlksiC0iEFmpAGoeq.jpg?size=400x0&quality=96&crop=0,0,1024,1024&ava=1",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},{id:"johndoe",name:"John Doe",avatarURL:"https://w7.pngwing.com/pngs/229/332/png-transparent-riddarens-v\xe5rdcentral-computer-icons-avatar-user-computer-software-others-computer-network-angle-orange-thumbnail.png",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}],v=[{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}];function g(e){return new Promise(((t,n)=>{const s=e.author,r=function({optionOne:e,optionTwo:t,author:n}){return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:n,optionOne:{votes:[],text:e},optionTwo:{votes:[],text:t}}}(e);setTimeout((()=>{const e=v.slice();e.push(r),v=e;const n=O.slice(),a=n.find((e=>e.id===s));a&&a.questions.push(r.id),O=n,t(r)}),1e3)}))}function x({authedUser:e,qId:t,answer:n}){return new Promise(((s,r)=>{setTimeout((()=>{const r=O.slice(),a=r.find((t=>t.id===e));a&&(a.answers[t]=n),O=r;const o=v.slice(),c=o.find((e=>e.id===t));c&&c[n].votes.push(e),v=o,s({users:O,questions:v})}),500)}))}const f=e=>({type:u.c.SET_USERS_REQUSET,payload:e}),w=e=>t=>{t({type:u.c.SET_USERS,payload:e})},S=()=>function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(f(!0)),e.prev=1,e.next=4,new Promise(((e,t)=>{setTimeout((()=>e(O)),1e3)}));case 4:n=e.sent,t(w(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:t(f(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),E=e=>t=>{t({type:u.c.SET_LOGGED_USER,payload:e})},y=e=>t=>{e.push("/"),t({type:u.c.LOGOUT_USER})},N=e=>({type:u.c.SET_SAVING_ANSWER,payload:e}),U=(e,t)=>function(){var n=Object(h.a)(m.a.mark((function n(s,a){var o,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=a().users.logged_user,s(N(!0)),c=Object(i.a)(Object(i.a)({},o),{},{answers:Object(i.a)(Object(i.a)({},o.answers),{},{[e]:t})}),console.log(c),s(E(c)),s(r.saveQuestionAnswer(e,t,o.id)),s(N(!1));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),T=e=>function(){var t=Object(h.a)(m.a.mark((function t(n,s){var r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=s().users.logged_user,a=Object(i.a)(Object(i.a)({},r),{},{questions:r.questions.concat(e)}),console.log(a),n(E(a));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),q=e=>({type:u.b.SET_QUESTIONS_REQUSET,payload:e}),k=e=>t=>{t({type:u.b.SET_QUESTIONS,payload:e})},R=()=>function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(q(!0)),e.prev=1,e.next=4,new Promise(((e,t)=>{setTimeout((()=>e(v)),1e3)}));case 4:n=e.sent,t(k(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:t(q(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),A=(e,t,n)=>function(){var s=Object(h.a)(m.a.mark((function s(r,a){var o,c,i;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=a().questions.questions,c=o.slice(),(i=c.find((t=>t.id===e)))&&i[t].votes.push(n),r(k(c)),s.abrupt("return",x({authedUser:n,qId:e,answer:t}).catch((e=>{console.warn("Error in handleSaveQuestionAnswer:",e)})));case 6:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}(),I=e=>({type:u.b.SET_ADDING_QUESTION,payload:e}),Q=(e,t,n)=>function(){var r=Object(h.a)(m.a.mark((function r(a,o){var c,i,u;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=o().questions.questions,a(I(!0)),r.prev=2,r.next=5,g({optionOne:e.optionOne,optionTwo:e.optionTwo,author:t});case 5:i=r.sent,(u=c.slice()).push(i),a(k(u)),a(s.saveUserQuestion(i.id)),n.push("/"),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(2),console.log(r.t0);case 16:a(I(!1));case 17:case"end":return r.stop()}}),r,null,[[2,13]])})));return function(e,t){return r.apply(this,arguments)}}(),z=()=>e=>{e(s.getUsers()),e(r.getQuestions())}},,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return x}));var s=n(0),r=n.p+"static/media/preloader.e3102914.svg",a=(n(34),n(1));const o=()=>Object(a.jsx)("div",{className:"preloader",children:Object(a.jsx)("img",{className:"preloader__spinner",src:r,alt:"spinner",draggable:!1})});var c=n(2),i=n(15),u=n(7),d=n(10),l=n(9),b=n(4),j=n(11),p=n(25);n(36);const _=e=>{let t=e.isButton,n=void 0!==t&&t,r=e.clickHandler,o=e.loggedUser,i=Object(p.a)(e,["isButton","clickHandler","loggedUser"]);const u=Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)("div",{className:"menu_user__avatar",style:{backgroundImage:"url(".concat(o.avatarURL,")")}}),Object(a.jsx)("div",{className:"menu_user__name",children:o.name})]});return n?Object(a.jsx)("div",Object(c.a)(Object(c.a)({className:"menu_user_btn",onClick:r},i),{},{children:u})):Object(a.jsx)("div",Object(c.a)(Object(c.a)({className:"menu_user"},i),{},{children:u}))};var m=n(3);n(37);const h=Object(u.b)((({users:e})=>({loggedUser:e.logged_user})),(e=>Object(c.a)({},Object(d.b)(j.d,e))))((({loggedUser:e,closeMenu:t,logout:n})=>{const r=Object(b.g)(),o=Object(s.useRef)(),c=e=>{o.current&&!o.current.contains(e.target)&&t()};return Object(s.useEffect)((()=>(document.addEventListener("click",c),()=>document.removeEventListener("click",c)))),e?Object(a.jsxs)("div",{className:"side_menu",ref:o,children:[Object(a.jsx)("div",{className:"side_menu__close_btn",onClick:t}),Object(a.jsx)(_,{loggedUser:e,style:{marginTop:"30px"}}),m.a.map((e=>Object(a.jsx)(l.c,{to:e.route,exact:!0,onClick:t,className:"side_menu__mobile_link",activeClassName:"side_menu__mobile_link__active",children:e.title},e.route))),Object(a.jsx)("div",{className:"side_menu__btn",onClick:()=>n(r),children:"Logout"})]}):null}));n(40);const O=Object(u.b)((({users:e})=>({loggedUser:e.logged_user,userIsLogged:e.logged})),(e=>Object(c.a)({},Object(d.b)(j.d,e))))((({loggedUser:e,userIsLogged:t})=>{const n=Object(s.useState)(!1),r=Object(i.a)(n,2),o=r[0],c=r[1];return Object(a.jsxs)("div",{className:"navbar",children:[t?Object(a.jsxs)(s.Fragment,{children:[Object(a.jsx)(l.b,{className:"navbar__title__logged",to:"/",children:"Would You Rather?"}),Object(a.jsx)("div",{className:"navbar__links",children:m.a.map((e=>Object(a.jsx)(l.c,{to:e.route,exact:!0,className:"navbar__link",activeClassName:"navbar__link__active",children:e.title},e.route)))})]}):Object(a.jsx)(l.b,{className:"navbar__title",to:"/",children:"Would You Rather?"}),t&&Object(a.jsx)(_,{isButton:!0,clickHandler:()=>c(!0),loggedUser:e,style:{marginLeft:"30px"}}),o&&Object(a.jsx)(h,{closeMenu:()=>c(!1)})]})}));n(41);const v=({mode:e,possibleAnswers:t,selectedAnswer:n,setSelectedAnswer:s,loggedUserAnswered:r,loggedUserId:o})=>{const c=()=>{let e=0;return t.forEach((t=>{e+=t.votes.length})),e},i=e=>e.includes(o),u=e=>Math.round(100*e/c());return"preview"===e?Object(a.jsx)("div",{className:"question_card__content__text",children:"".concat(t[0].text," or...")}):r?Object(a.jsxs)("div",{className:"result",children:[Object(a.jsx)("div",{className:"result__title",children:"Result:"}),Object(a.jsx)("div",{className:"result__stats",children:t.map((e=>Object(a.jsxs)("div",{className:"result__stat ".concat(i(e.votes)?"result__stat__users_vote":""),children:[i(e.votes)&&Object(a.jsx)("div",{className:"user_voted",children:Object(a.jsx)("div",{children:"Your Vote"})}),Object(a.jsx)("div",{className:"result__name",children:e.text}),Object(a.jsxs)("div",{className:"result__bar",children:[Object(a.jsx)("p",{className:"result__bar__percentage",children:"".concat(u(e.votes.length),"%")}),Object(a.jsx)("div",{className:"result__bar__filled",style:{transform:"translateX(".concat(u(e.votes.length),"%)")}})]}),Object(a.jsx)("div",{className:"result__text",children:"".concat(e.votes.length," of ").concat(c()," votes")})]},e.id)))})]}):Object(a.jsx)(a.Fragment,{children:t.map((e=>Object(a.jsxs)("label",{className:"question_card__content__label",children:[Object(a.jsx)("input",{type:"radio",value:e.id,checked:e.id===n.id,onChange:()=>s(e)}),Object(a.jsx)("p",{className:"question_card__content__value",children:e.text})]},e.id)))})};n(42);const g=({mode:e,selectedAnswer:t,loggedUserAnswered:n,handleSubmit:s,questionId:r})=>"preview"!==e||n?"preview"===e&&n?Object(a.jsx)(l.b,{to:"questions/".concat(r),className:"question_card__content__btn",children:"See Result"}):"full"===e&&n?null:Object(a.jsx)("button",{className:"question_card__content__btn",disabled:0===t.length,onClick:s,children:"Submit"}):Object(a.jsx)(l.b,{to:"questions/".concat(r),className:"question_card__content__btn",children:"Answer"});n(43);const x=Object(u.b)((({users:e})=>({users:e.users,loggedUser:e.logged_user})),(e=>Object(c.a)({},Object(d.b)(j.d,e))))((({mode:e="full",users:t,question:n,loggedUser:r,saveUserAnswer:o,className:c=""})=>{const u=n.optionOne,d=n.optionTwo,l=n.author,b=n.id,j=t.find((e=>e.id===l)),p=()=>Object.keys(r.answers).includes(n.id),_=[{id:"optionOne",text:u.text,votes:u.votes},{id:"optionTwo",text:d.text,votes:d.votes}],m=Object(s.useState)(""),h=Object(i.a)(m,2),O=h[0],x=h[1];return Object(a.jsxs)("div",{className:"question_card ".concat(c),children:[j&&Object(a.jsxs)("div",{className:"question_card__author",children:[Object(a.jsx)("div",{className:"question_card__author__name",children:j.name}),Object(a.jsx)("div",{className:"question_card__author__avatar",style:{backgroundImage:"url(".concat(j.avatarURL,")")}})]}),Object(a.jsxs)("div",{className:"question_card__content",children:[Object(a.jsx)("div",{className:"question_card__content__title",children:"Would You Rather"}),Object(a.jsx)(v,{mode:e,possibleAnswers:_,selectedAnswer:O,loggedUserAnswered:p(),setSelectedAnswer:e=>x(e),loggedUserId:r.id}),Object(a.jsx)(g,{mode:e,loggedUserAnswered:p(),selectedAnswer:O,handleSubmit:()=>o(b,O.id),questionId:b})]})]})}))},,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(16),o=n.n(a),c=n(7),i=n(11),u=n(9),d=n(4),l=n(18),b=n(1);const j=r.a.lazy((()=>n.e(6).then(n.bind(null,53)))),p=r.a.lazy((()=>n.e(4).then(n.bind(null,54)))),_=r.a.lazy((()=>n.e(8).then(n.bind(null,55)))),m=r.a.lazy((()=>n.e(3).then(n.bind(null,58)))),h=r.a.lazy((()=>n.e(5).then(n.bind(null,56)))),O=r.a.lazy((()=>n.e(7).then(n.bind(null,57))));var v=Object(c.b)((({users:e})=>({userLogged:e.logged})),null)((({userLogged:e})=>Object(b.jsx)(u.a,{children:Object(b.jsxs)("div",{className:"page",children:[Object(b.jsx)(l.a,{}),Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(s.Suspense,{fallback:Object(b.jsx)(l.b,{}),children:e?Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{exact:!0,path:"/",component:j}),Object(b.jsx)(d.b,{path:"/leaderboard",component:m}),Object(b.jsx)(d.b,{path:"/questions/:id",component:_}),Object(b.jsx)(d.b,{path:"/add",component:p}),Object(b.jsx)(d.b,{path:"/authorization",component:h}),Object(b.jsx)(d.b,{path:"*",component:O})]}):Object(b.jsx)(h,{})})})]})})));n(44);var g=function(){const e=Object(c.c)();return Object(s.useEffect)((()=>{e(i.a.startApp())}),[e]),Object(b.jsx)("div",{className:"app",children:Object(b.jsx)(v,{})})};const x=i.c,f=document.getElementById("root");o.a.render(Object(b.jsx)(c.a,{store:x,children:Object(b.jsx)(g,{})}),f)}],[[45,1,2]]]);
//# sourceMappingURL=main.f88acb90.chunk.js.map